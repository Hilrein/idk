# RTMP в RTSP Конвертер

Простой конвертер потоков RTMP в RTSP на Python. Инструмент позволяет принимать RTMP-поток и пересылать его по протоколу RTSP без перекодирования.

### Быстрый запуск (для Windows)

В Windows можно использовать скрипт `start_converter.bat` для интерактивного запуска конвертера:
1. Дважды щелкните по файлу `start_converter.bat`
2. Следуйте инструкциям в открывшемся окне
3. Введите URL-адрес RTMP потока и другие параметры по запросу

### Запуск из командной строки

Запустите скрипт main.py с указанием URL-адреса RTMP потока:

```bash
python main.py --rtmp-url rtmp://example.com/live/stream
```

### Параметры:

- `--rtmp-url` (обязательный): URL-адрес источника RTMP
- `--rtsp-port` (опциональный, по умолчанию 8554): Порт для RTSP-сервера
- `--rtsp-path` (опциональный, по умолчанию "stream"): Путь к потоку на RTSP-сервере
- `--max-retries` (опциональный, по умолчанию 10): Максимальное количество попыток перезапуска при ошибках
- `--retry-interval` (опциональный, по умолчанию 5): Интервал между попытками перезапуска в секундах

### Пример:

```bash
python main.py --rtmp-url rtmp://example.com/live/stream --rtsp-port 8555 --rtsp-path mystream
```

После запуска, RTSP поток будет доступен по адресу:
```
rtsp://localhost:8555/mystream
```

### Проверка RTSP потока:

Для проверки доступности созданного RTSP потока используйте:
```bash
python test_rtsp_connection.py --rtsp-url rtsp://localhost:8554/stream
```

## Как это работает

Конвертер использует FFmpeg для перенаправления RTMP потока в RTSP. Основные шаги:

1. Программа принимает входящий RTMP URL из аргументов командной строки
2. Запускает экземпляр FFmpeg для трансляции потока в RTSP без перекодирования
3. Мониторит состояние процесса и автоматически перезапускает его при необходимости

## Остановка

Для остановки программы нажмите Ctrl+C в терминале. Программа корректно завершит работу FFmpeg.

## Использование Docker

Для запуска конвертера в контейнере Docker:

```bash
docker-compose up -d
```

Настройте RTMP URL и другие параметры в файле `docker-compose.yml` перед запуском. 